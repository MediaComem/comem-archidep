<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <meta name="description" content="" />
    <meta name="author" content="" />

    <title>COMEM+ Web Development</title>

    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css"
      integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u"
      crossorigin="anonymous"
    />
    <link
      rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap-theme.min.css"
      integrity="sha384-rHyoN1iRsVXV4nD0JutlnGaslCJuC7uwjduW9SVrLvRYooPp2bWYgmgJQIXwl/Sp"
      crossorigin="anonymous"
    />

    <style>
      @import url(https://fonts.googleapis.com/css?family=Yanone+Kaffeesatz);
      @import url(https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400i,700i);
      @import url(https://fonts.googleapis.com/css?family=Ubuntu+Mono:400,700,400i);

      body {
        font-family: 'Droid Serif';
      }

      h1,
      h2,
      h3,
      h4 {
        font-family: 'Yanone Kaffeesatz';
        font-weight: normal;
      }

      li ul {
        margin-bottom: 1em;
      }
    </style>
  </head>

  <body>
    <div class="container"><h1 id="comem-architecture--deployment-course">COMEM+ Architecture &amp; Deployment course</h1>
<p>In this course you will learn:</p>
<ul>
<li>How to deploy applications on a Linux server on an IaaS platform (Microsoft Azure).</li>
<li>How to deploy applications on a PaaS platform (Render).</li>
</ul>
<p>In pursuit of this goal, you will learn:</p>
<ul>
<li>How to use the command line and version control.</li>
<li>The basics of Unix system administration and cloud computing architectures.</li>
<li>Good security practices related to system administration and web applications.</li>
</ul>
<p>This course is a <a href="http://www.heig-vd.ch/comem">COMEM+</a> <a href="https://github.com/MediaComem/comem-webdev">web development course</a> taught at <a href="http://www.heig-vd.ch">HEIG-VD</a>.</p>
<!-- START doctoc generated TOC please keep comment here to allow auto update -->
<!-- DON'T EDIT THIS SECTION, INSTEAD RE-RUN doctoc TO UPDATE -->

<ul>
<li><a href="#plan">Plan</a></li>
<li><a href="#how-to-improve-our-basic-deployment">How to improve our basic deployment</a></li>
<li><a href="#what-you-will-need">What you will need</a></li>
<li><a href="#exercises">Exercises</a></li>
<li><a href="#frequently-asked-questions">Frequently Asked Questions</a><ul>
<li><a href="#how-do-i-do-x-with-the-command-line">How do I do <em>X</em> with the command line?</a></li>
<li><a href="#how-do-i-connect-to-my-server-and-stuff">How do I connect to my server and stuff?</a></li>
<li><a href="#how-do-i-do-y-with-git">How do I do <em>Y</em> with Git?</a></li>
</ul>
</li>
<li><a href="#references">References</a></li>
</ul>
<!-- END doctoc generated TOC please keep comment here to allow auto update -->

<h2 id="plan">Plan</h2>
<ul>
<li>Introduction<ul>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/cli?home=MediaComem%2Fcomem-archidep%23readme">Command line</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/ssh?home=MediaComem%2Fcomem-archidep%23readme">Secure Shell (SSH)</a></li>
</ul>
</li>
<li>Version control<ul>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/git?home=MediaComem%2Fcomem-archidep%23readme">Version control with Git</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/git-branching?home=MediaComem%2Fcomem-archidep%23readme">Git branching</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/git-collaborating?home=MediaComem%2Fcomem-archidep%23readme">Collaborating with Git</a></li>
</ul>
</li>
<li>Security<ul>
<li><a href="https://www.owasp.org">Open Web Application Security Project</a></li>
<li><a href="https://owasp.org/www-project-top-ten/">OWASP Top 10 - The Ten Most Critical Web Application Security Risks</a></li>
<li><a href="./ex/security-gallery.md">The image gallery</a></li>
<li><a href="https://github.com/MediaComem/csrf-bank">The CSRF bank</a><ul>
<li><a href="https://github.com/MediaComem/phishing">Phishing page</a></li>
</ul>
</li>
</ul>
</li>
<li>Basic deployment<ul>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/cloud?home=MediaComem%2Fcomem-archidep%23readme">Cloud computing</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/linux?home=MediaComem%2Fcomem-archidep%23readme">Linux</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/unix-admin?home=MediaComem%2Fcomem-archidep%23readme">Unix basics &amp; administration</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/unix-processes?home=MediaComem%2Fcomem-archidep%23readme">Unix processes</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/unix-networking?home=MediaComem%2Fcomem-archidep%23readme">Unix networking</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/apt?home=MediaComem%2Fcomem-archidep%23readme">APT</a></li>
</ul>
</li>
<li><a href="#how-to-improve-our-basic-deployment">How to improve our basic deployment</a></li>
<li>Advanced deployment<ul>
<li><a href="https://12factor.net">Twelve-factor app</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/unix-env-vars?home=MediaComem%2Fcomem-archidep%23readme">Unix environment variables</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/linux-process-management?home=MediaComem%2Fcomem-archidep%23readme">Linux process management</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/dns?home=MediaComem%2Fcomem-archidep%23readme">Domain Name System (DNS)</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/reverse-proxy?home=MediaComem%2Fcomem-archidep%23readme">Reverse proxying</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/ssl?home=MediaComem%2Fcomem-archidep%23readme">TLS/SSL certificates</a></li>
</ul>
</li>
<li>Automated deployment<ul>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/shell-scripting?home=MediaComem%2Fcomem-archidep%23readme">Shell scripting</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/git-hooks?home=MediaComem%2Fcomem-archidep%23readme">Git hooks</a></li>
</ul>
</li>
<li>Managed deployments<ul>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/paas?home=MediaComem%2Fcomem-archidep%23readme">Platform-as-a-Service (PaaS)</a></li>
</ul>
</li>
<li><em>Software development (extra)</em><ul>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/continuous?home=MediaComem%2Fcomem-archidep%23readme">Continuous software development</a></li>
<li><a href="https://mediacomem.github.io/comem-archidep/2022-2023/subjects/automated-testing?home=MediaComem%2Fcomem-archidep%23readme">Automated testing (2018)</a></li>
<li><a href="https://mediacomem.github.io/comem-archioweb/2022-2023/subjects/automated-testing/?home=MediaComem%2Fcomem-archioweb%23readme#1">Automated testing (2020)</a><ul>
<li><a href="https://youtu.be/BSaAMQVq01E">YouTube: Expecting Profesionnalism – Robert C. Martin</a></li>
<li><a href="https://youtu.be/Tng6Fox8EfI">YouTube: GOTO 2017 – The Scribe&#39;s Oath – Robert C. Martin</a></li>
<li><a href="https://youtu.be/ecIWPzGEbFc">YouTube: The Future of Programming – Robert C. Martin</a></li>
</ul>
</li>
</ul>
</li>
</ul>
<h2 id="how-to-improve-our-basic-deployment">How to improve our basic deployment</h2>
<p>The basic SFTP deployment of the PHP TodoList has several flaws which we will
fix during the rest of the course:</p>
<ul>
<li>Transfering files manually through SFTP is slow and error-prone. We will use
<strong>Git</strong> to reliably transfer files <a href="https://12factor.net/codebase">from our central
codebase</a> and easily keep our deployment up-to-date over
time.</li>
<li><a href="https://12factor.net/config">Hardcoding configuration is a bad practice</a>. We will use
<strong>environment variables</strong> so that our application can be dynamically
configured and deployed in any environment without changing its source code.</li>
<li>Starting our application manually is not suitable for a production deployment.
We will use a <strong>process manager</strong> to manage the lifecycle of our application:
starting it automatically when the server boots, and restarting it
automatically if it crashes.</li>
<li>Accessing a web application through an IP address is not user-friendly. We
will obtain a domain and configure its DNS zone file so that our application
is accessible with a human-readable <strong>domain name</strong>.</li>
<li>Using a non-standard port is not user-friendly either. We will run the
application on <strong>port 80 or 443</strong> so that the end user does not have to
specify a port in the browser&#39;s address bar.</li>
<li>Running our application server directly on port 80 or 443 will cause a
problem: only one process can listen on a given port at the same time. We need
another tool to support <strong>multiple production deployments on the same
server</strong>. That will be the job of a reverse proxy like <a href="https://httpd.apache.org">Apache</a> or
<a href="https://www.nginx.com">nginx</a>.</li>
<li>Our application is not secure as indicated by the browser, because it is
served over HTTP and not HTTPS. We will obtain a <strong>TLS/SSL certificate</strong>
signed by a trusted certificate authority so that our application can be
served over HTTPS and recognized as secure by browsers.</li>
<li>The <a href="https://www.php.net/manual/en/features.commandline.webserver.php">PHP Development Server</a> is not meant to deploy
applications in production environments. We will use the <a href="https://www.php.net/manual/en/install.fpm.php"><strong>FastCGI Process
Manager</strong></a> to perform a production-grade deployment, making our
application more resilient and able to serve more clients concurrently.</li>
</ul>
<h2 id="what-you-will-need">What you will need</h2>
<ul>
<li>A Unix CLI<ul>
<li>Linux/macOS users can use their standard Terminal</li>
<li>Windows users should install <a href="https://gitforwindows.org">Git for Windows</a> which
includes Git Bash</li>
</ul>
</li>
<li><a href="https://git-scm.com/downloads">Git</a><ul>
<li>macOS users should <a href="https://www.freecodecamp.org/news/install-xcode-command-line-tools/">install the command-line tools</a></li>
<li>Windows users should install <a href="https://gitforwindows.org">Git for Windows</a></li>
</ul>
</li>
<li>A free <a href="https://github.com">GitHub</a> account</li>
<li><a href="https://www.google.com/chrome/">Google Chrome</a> (recommended, any browser with developer tools will do)</li>
<li>A free <a href="https://render.com">Render</a> account</li>
</ul>
<h2 id="exercises">Exercises</h2>
<ul>
<li><strong>Version control</strong><ul>
<li><a href="https://github.com/MediaComem/comem-archidep-php-todo-exercise">Collaborative exercise</a> (<strong>graded</strong>)</li>
<li><a href="ex/git-clone-from-server.md">Clone a repository from a server</a></li>
<li><a href="ex/git-push-to-server.md">Push a repository to a server</a></li>
</ul>
</li>
<li><strong>Unix</strong><ul>
<li><a href="ex/unix-permissions.md">Permissions</a><ul>
<li><a href="ex/unix-permissions-solutions.md">Solutions</a></li>
</ul>
</li>
<li><a href="ex/unix-pipeline.md">Pipeline</a><ul>
<li><a href="ex/unix-pipeline-solutions.md">Solutions</a></li>
</ul>
</li>
</ul>
</li>
<li><strong>Basic deployment</strong><ul>
<li><a href="ex/azure-setup.md">Run your own virtual server on Microsoft Azure</a></li>
<li><a href="ex/sftp-deployment.md">Deploy a PHP application with SFTP</a><ul>
<li><a href="ex/sftp-deployment.md#architecture">Architecture</a></li>
</ul>
</li>
</ul>
</li>
<li><strong>Advanced deployment</strong><ul>
<li><a href="ex/git-clone-deployment.md">Deploy a PHP application with Git</a><ul>
<li><a href="ex/git-clone-deployment.md#architecture">Architecture</a></li>
</ul>
</li>
<li><a href="ex/config-through-environment.md">Configure a PHP application through environment variables</a><ul>
<li><a href="ex/config-through-environment.md#architecture">Architecture</a></li>
</ul>
</li>
<li><a href="ex/systemd-deployment.md">Manage a PHP application with systemd as a Process Manager</a><ul>
<li><a href="ex/systemd-deployment-solution.md">Solution</a></li>
<li><a href="ex/systemd-deployment.md#architecture">Architecture</a></li>
</ul>
</li>
<li><a href="ex/dns-configuration.md">Configure a domain name</a><ul>
<li><a href="ex/dns-configuration.md#architecture">Architecture</a></li>
</ul>
</li>
<li><a href="ex/nginx-static-deployment.md">Deploy a static site with nginx</a><ul>
<li><a href="ex/nginx-static-deployment-solution.md">Solution</a></li>
<li><a href="ex/nginx-static-deployment.md#architecture">Architecture</a></li>
</ul>
</li>
<li><a href="ex/nginx-php-fpm-deployment.md">Deploy a PHP application with nginx and the FastCGI process manager</a><ul>
<li><a href="ex/nginx-php-fpm-deployment-solution.md">Solution</a></li>
<li><a href="ex/nginx-php-fpm-deployment.md#architecture">Architecture</a></li>
</ul>
</li>
<li><a href="./ex/revprod-deployment.md">Deploy a multi-component web application with nginx</a><ul>
<li><a href="ex/revprod-deployment-solution.md">Solution</a></li>
<li><a href="ex/revprod-deployment.md#architecture">Architecture</a></li>
</ul>
</li>
<li><a href="ex/certbot-deployment.md">Provision a Let&#39;s Encrypt TLS certificate with Certbot</a><ul>
<li><a href="ex/certbot-deployment.md#architecture">Architecture</a></li>
</ul>
</li>
<li><a href="ex/git-automated-deployment.md">Set up an automated deployment with Git hooks</a><ul>
<li><a href="ex/git-automated-deployment.md#architecture">Architecture</a></li>
</ul>
</li>
<li><a href="ex/floodit-deployment.md">Deploy Flood It, a Spring Boot (Java) &amp; Angular application with a PostgreSQL database (<strong>graded</strong>)</a></li>
<li><a href="./ex/fibscale-deployment.md">Horizontally scale a web application with nginx as a load balancer</a><ul>
<li><a href="ex/fibscale-deployment.md#architecture">Architecture</a></li>
</ul>
</li>
</ul>
</li>
<li><strong>Platform-as-a-Service deployment</strong><ul>
<li><a href="./ex/netlify-static-deployment.md">Deploy a static site to Netlify</a></li>
<li>Deploy web applications with a database to Render (<em>not yet available</em>)</li>
</ul>
</li>
<li><em>Extra</em><ul>
<li><a href="ex/one-chat-room-deployment.md">Deploy One Chat Room, an Express (Node.js) web application with a MongoDB database</a><ul>
<li><a href="ex/end-result.pdf">Diagram</a></li>
</ul>
</li>
<li><a href="ex/big-browser-deployment.md">Deploy Big Browser, a Nest.js (Node.js) application with a Redis database</a></li>
<li><a href="ex/wopr-deployment.md">Deploy WOPR, a Sinatra &amp; Svelte application with a Redis database</a></li>
<li><a href="ex/rps-deployment.md">Deploy RPS, a Node.js &amp; Svelte web application with a PostgreSQL database</a></li>
<li><a href="./ex/minesweeper-deployment.md">Deploy Minesweeper, a Phoenix (Elixir) &amp; Alpine.js application with a PostgreSQL database</a><ul>
<li><a href="ex/minesweeper-deployment.md#books-architecture">Architecture</a></li>
</ul>
</li>
<li><a href="ex/load-balancing-deployment.md">Configure nginx as a load balancer</a></li>
</ul>
</li>
</ul>
<h2 id="frequently-asked-questions">Frequently Asked Questions</h2>
<h3 id="what-is-the-meaning-of-life">What is the meaning of life?</h3>
<p>42</p>
<h3 id="how-do-i-do-x-with-the-command-line">How do I do <em>X</em> with the command line?</h3>
<p><a href="CLI-CHEATSHEET.md">Read the command line cheatsheet</a></p>
<h3 id="how-do-i-connect-to-my-server-and-stuff">How do I connect to my server and stuff?</h3>
<p><a href="SYSADMIN-CHEATSHEET.md">Read the system administration cheatsheet</a></p>
<h3 id="how-do-i-do-y-with-git">How do I do <em>Y</em> with Git?</h3>
<p><a href="GIT-CHEATSHEET.md">Read the Git cheatsheet</a></p>
<h2 id="references">References</h2>
<p>These are the main references used throughout this course. More detailed and
additional links to various online articles and documentation can be found at
the end of each subject.</p>
<ul>
<li><a href="https://tldp.org">The Linux Documentation Project</a><ul>
<li><a href="https://tldp.org/LDP/abs/html/">Advanced Bash-Scripting Guide</a></li>
</ul>
</li>
<li><a href="https://github.com/readme/featured/future-of-the-command-line">Building the Future of the Command Line</a></li>
<li><a href="https://books.google.ch/books/about/SSH_The_Secure_Shell_The_Definitive_Guid.html?id=9FSaScltd-kC&amp;redir_esc=y">SSH, The Secure Shell: The Definitive Guide - Daniel J. Barrett, Richard E. Silverman, Robert G. Byrnes</a></li>
<li><a href="https://git-scm.com/book">The Git Book</a><ul>
<li><a href="https://git-scm.com/book/en/v2/Getting-Started-About-Version-Control">Chapter 1 - Getting Started</a></li>
<li><a href="https://git-scm.com/book/en/v2/Git-Basics-Getting-a-Git-Repository">Chapter 2 - Git Basics</a></li>
<li><a href="https://git-scm.com/book/en/v2/Git-Branching-Branches-in-a-Nutshell">Chapter 3 - Git Branching</a></li>
<li><a href="https://git-scm.com/book/en/v2/Distributed-Git-Distributed-Workflows">Chapter 5 - Distributed Git</a></li>
<li><a href="https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks">Chapter 8 - Customizing Git - Git Hooks</a></li>
</ul>
</li>
<li><a href="https://www.owasp.org">Open Web Application Security Project</a><ul>
<li><a href="https://owasp.org/www-project-top-ten/">OWASP Top Ten</a></li>
</ul>
</li>
<li><a href="https://www.opsschool.org">Ops School Curriculum</a><ul>
<li><a href="https://www.opsschool.org/sysadmin_101.html">Sysadmin 101</a></li>
<li><a href="https://www.opsschool.org/unix_101.html">Unix Fundamentals 101</a></li>
<li><a href="https://www.opsschool.org/unix_201.html">Unix Fundamentals 201</a></li>
<li><a href="https://www.opsschool.org/networking_101.html">Networking 101</a></li>
<li><a href="https://www.opsschool.org/networking_201.html">Networking 201</a></li>
</ul>
</li>
<li><a href="https://ef1p.com/internet">The Internet Explained From First Principles</a></li>
<li><a href="https://12factor.net">The Twelve-Factor App</a></li>
<li><a href="https://www.freedesktop.org/software/systemd/man/">Systemd Manual</a><ul>
<li><a href="https://www.freedesktop.org/software/systemd/man/systemd.unit.html">Unit Configuration</a></li>
<li><a href="https://www.freedesktop.org/software/systemd/man/systemd.service.html">Service Configuration</a></li>
</ul>
</li>
<li><a href="http://nginx.org/en/docs/">nginx documentation</a><ul>
<li><a href="http://nginx.org/en/docs/beginners_guide.html">Beginner&#39;s Guide</a></li>
<li><a href="http://nginx.org/en/docs/http/configuring_https_servers.html">Configuring HTTPS Servers</a></li>
</ul>
</li>
<li><a href="https://render.com/docs">Render Documentation</a></li>
</ul>
<p><a href="https://www.wikipedia.org">Wikipedia</a> is also often referenced, namely these
and related articles:</p>
<ul>
<li><a href="https://en.wikipedia.org/wiki/Secure_Shell">Secure Shell</a></li>
<li><a href="https://en.wikipedia.org/wiki/Cloud_computing">Cloud Computing</a></li>
<li><a href="https://en.wikipedia.org/wiki/Internet_Protocol">Internet Protocol</a><ul>
<li><a href="https://en.wikipedia.org/wiki/IP_address">IP Address</a></li>
<li><a href="https://en.wikipedia.org/wiki/Port_(computer_networking)">Port (Computer Networking)</a></li>
</ul>
</li>
<li><a href="https://en.wikipedia.org/wiki/Domain_Name_System">Domain Name System</a></li>
<li><a href="https://en.wikipedia.org/wiki/Environment_variable">Environment Variable</a></li>
<li><a href="https://en.wikipedia.org/wiki/Reverse_proxy">Reverse Proxy</a></li>
<li><a href="https://en.wikipedia.org/wiki/Public_key_certificate">Public Key Certificate</a></li>
</ul>
</div>
  </body>
</html>
